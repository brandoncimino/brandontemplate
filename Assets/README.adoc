= Brandon's Unity Template
// These are unicode emojis,
// which are used instead of FontAwesome icons for admonitions.
// See: https://docs.asciidoctor.org/asciidoc/latest/blocks/admonitions/#using-emoji-for-admonition-icons
:tip-caption: 📎
:note-caption: 📰
:warning-caption: ⚠
:caution-caption: 🔥
:important-caption: ‼
:sectnums:
:toc:

== Project Structure
> or, "Where do I put this crap?"

.*TL;DR:* Decision-making process
[caption=""]
====
[qanda]
Does this code import `Unity**Editor**`?::
-> link:Code/Editor/[]

Does this code import `Unity**Engine**`?::
-> link:Code/Runtime/[]

Everything else::
-> link:Code/Standalone/[]
====

.References / Inspirations
[sidebar]
--
- https://forum.unity.com/threads/mature-project-folder-structure.654694/
- https://docs.unity3d.com/Manual/cus-asmdef.html
- https://docs.unity3d.com/Manual/cus-layout.html
--

[WARNING]
--
There are 3 different places where code is organized:

- Assembly definitions
- Folders
- Namespaces

These three levels of organization *should match each other*.

For example:

[cols="m,m,m"]
|===
|Path |Namespace |`.asmdef`

|Assets/Code/Runtime/Enemies/Slime.cs
|Code.Runtime.Enemies
|Code.Runtime.asmdef{wj}footnote:[The `.asmdef` file lives in the `Assets/Code/Runtime` folder, so the name does _not_ include `.Enemies`.]
|===
--

There are *3 kinds of code assets*:

link:Code/Runtime/["Runtime"]::
- Any code with a dependency on `UnityEngine`
- In this context, "runtime" is synonymous with "play mode"
link:Code/Editor/["Editor"]::
- Any code that *requires* a dependency on `UnityEditor`
link:Code/Editor/["Standalone"]::
- Any code that has *no Unity dependencies* - i.e. `No Engine References` is checked off



== Folders

=== Code

[#_code-editor]
==== link:{docdir}[/Code/Editor]

> Editor extensions, custom inspectors, etc.

- This code relies on *both* `UnityEditor` _and_ `UnityEngine`.
- Tested by <<_tests-editor>>.

[#_code-runtime]
==== link:{docdir}[/Code/Runtime]

> aka "Play Mode."

- All of the code that runs during gameplay.
- Relies on `UnityEngine`.
- Includes *all* `MonoBehavior` descendents.
- Tested by <<_tests-runtime>>.

[TIP]
--
Try to use non-Unity equivalents of libraries and move your code into <<_code-standalone>> where possible.

For example:

- `UnityEngine.Random` -> `System.Random`
- `UnityEngine.JsonUtility` -> `Newtonsoft.Json.JsonConvert`

This has several benefits, such as:

- Allowing the code to be tested using the https://www.jetbrains.com/help/rider/Running_and_Debugging_Unity_Tests.html[Standalone NUnit Launcher], which is _much_ faster than using Play Mode.
- Making the code more easily ported to non-Unity `C#` projects, like https://github.com/brandoncimino/PowerSharp[PowerSharp].
- Makes the code rely on "industry-standard" libraries, which are more likely to have strong tutorials, examples, etc.
--

[#_code-standalone]
==== link:{docdir}[/Code/Standalone]

> Code that *does not touch Unity*.

- This directory's `.asmdef` should contain:
+
[source,json]
----
  "noEngineReferences": true
----
+
- Code in this directory *cannot* reference `UnityEngine` *or* `UnityEditor`.
- Code in this directory *can* reference *Packages*, such as https://github.com/brandoncimino/brandon-utils[`brandon-utils`] or https://github.com/jilleJr/Newtonsoft.Json-for-Unity[`Newtonsoft.Json for Unity`].
- Code in this package should be tested using <<_tests-standalone>>.



[#_tests]
=== link:{docdir}[Tests]

> Contains all of the Unity unit tests.

Each directory corresponds to one of the types of {rider-testing}[unit test runners] supported by https://www.jetbrains.com/rider/[JetBrains Rider].


[#_tests-editor]
==== link:{docdir}[/Tests/Editor]

> {rider-testing}[*Edit Mode*] tests that target <<_code-editor>>.


[#_tests-runtime]
==== link:{docdir}[/Tests/Runtime]

> {rider-testing}[*Play Mode*] tests that target <<_code-runtime>>.


[#_tests-standalone]
==== link:{docfile}[/Tests/Standalone]

> {rider-testing}[*NUnit Standalone*] tests that target <<_code-standalone>>.



=== Sketchbook

Place anything you want to play around with in here.

WARNING: This folder should *never* be checked in to the repository.
